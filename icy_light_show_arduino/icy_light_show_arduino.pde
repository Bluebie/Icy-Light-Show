#define px________ 0
#define px_______8 1
#define px______8_ 2
#define px______88 3
#define px_____8__ 4
#define px_____8_8 5
#define px_____88_ 6
#define px_____888 7
#define px____8___ 8
#define px____8__8 9
#define px____8_8_ 10
#define px____8_88 11
#define px____88__ 12
#define px____88_8 13
#define px____888_ 14
#define px____8888 15
#define px___8____ 16
#define px___8___8 17
#define px___8__8_ 18
#define px___8__88 19
#define px___8_8__ 20
#define px___8_8_8 21
#define px___8_88_ 22
#define px___8_888 23
#define px___88___ 24
#define px___88__8 25
#define px___88_8_ 26
#define px___88_88 27
#define px___888__ 28
#define px___888_8 29
#define px___8888_ 30
#define px___88888 31
#define px__8_____ 32
#define px__8____8 33
#define px__8___8_ 34
#define px__8___88 35
#define px__8__8__ 36
#define px__8__8_8 37
#define px__8__88_ 38
#define px__8__888 39
#define px__8_8___ 40
#define px__8_8__8 41
#define px__8_8_8_ 42
#define px__8_8_88 43
#define px__8_88__ 44
#define px__8_88_8 45
#define px__8_888_ 46
#define px__8_8888 47
#define px__88____ 48
#define px__88___8 49
#define px__88__8_ 50
#define px__88__88 51
#define px__88_8__ 52
#define px__88_8_8 53
#define px__88_88_ 54
#define px__88_888 55
#define px__888___ 56
#define px__888__8 57
#define px__888_8_ 58
#define px__888_88 59
#define px__8888__ 60
#define px__8888_8 61
#define px__88888_ 62
#define px__888888 63
#define px_8______ 64
#define px_8_____8 65
#define px_8____8_ 66
#define px_8____88 67
#define px_8___8__ 68
#define px_8___8_8 69
#define px_8___88_ 70
#define px_8___888 71
#define px_8__8___ 72
#define px_8__8__8 73
#define px_8__8_8_ 74
#define px_8__8_88 75
#define px_8__88__ 76
#define px_8__88_8 77
#define px_8__888_ 78
#define px_8__8888 79
#define px_8_8____ 80
#define px_8_8___8 81
#define px_8_8__8_ 82
#define px_8_8__88 83
#define px_8_8_8__ 84
#define px_8_8_8_8 85
#define px_8_8_88_ 86
#define px_8_8_888 87
#define px_8_88___ 88
#define px_8_88__8 89
#define px_8_88_8_ 90
#define px_8_88_88 91
#define px_8_888__ 92
#define px_8_888_8 93
#define px_8_8888_ 94
#define px_8_88888 95
#define px_88_____ 96
#define px_88____8 97
#define px_88___8_ 98
#define px_88___88 99
#define px_88__8__ 100
#define px_88__8_8 101
#define px_88__88_ 102
#define px_88__888 103
#define px_88_8___ 104
#define px_88_8__8 105
#define px_88_8_8_ 106
#define px_88_8_88 107
#define px_88_88__ 108
#define px_88_88_8 109
#define px_88_888_ 110
#define px_88_8888 111
#define px_888____ 112
#define px_888___8 113
#define px_888__8_ 114
#define px_888__88 115
#define px_888_8__ 116
#define px_888_8_8 117
#define px_888_88_ 118
#define px_888_888 119
#define px_8888___ 120
#define px_8888__8 121
#define px_8888_8_ 122
#define px_8888_88 123
#define px_88888__ 124
#define px_88888_8 125
#define px_888888_ 126
#define px_8888888 127
#define px8_______ 128
#define px8______8 129
#define px8_____8_ 130
#define px8_____88 131
#define px8____8__ 132
#define px8____8_8 133
#define px8____88_ 134
#define px8____888 135
#define px8___8___ 136
#define px8___8__8 137
#define px8___8_8_ 138
#define px8___8_88 139
#define px8___88__ 140
#define px8___88_8 141
#define px8___888_ 142
#define px8___8888 143
#define px8__8____ 144
#define px8__8___8 145
#define px8__8__8_ 146
#define px8__8__88 147
#define px8__8_8__ 148
#define px8__8_8_8 149
#define px8__8_88_ 150
#define px8__8_888 151
#define px8__88___ 152
#define px8__88__8 153
#define px8__88_8_ 154
#define px8__88_88 155
#define px8__888__ 156
#define px8__888_8 157
#define px8__8888_ 158
#define px8__88888 159
#define px8_8_____ 160
#define px8_8____8 161
#define px8_8___8_ 162
#define px8_8___88 163
#define px8_8__8__ 164
#define px8_8__8_8 165
#define px8_8__88_ 166
#define px8_8__888 167
#define px8_8_8___ 168
#define px8_8_8__8 169
#define px8_8_8_8_ 170
#define px8_8_8_88 171
#define px8_8_88__ 172
#define px8_8_88_8 173
#define px8_8_888_ 174
#define px8_8_8888 175
#define px8_88____ 176
#define px8_88___8 177
#define px8_88__8_ 178
#define px8_88__88 179
#define px8_88_8__ 180
#define px8_88_8_8 181
#define px8_88_88_ 182
#define px8_88_888 183
#define px8_888___ 184
#define px8_888__8 185
#define px8_888_8_ 186
#define px8_888_88 187
#define px8_8888__ 188
#define px8_8888_8 189
#define px8_88888_ 190
#define px8_888888 191
#define px88______ 192
#define px88_____8 193
#define px88____8_ 194
#define px88____88 195
#define px88___8__ 196
#define px88___8_8 197
#define px88___88_ 198
#define px88___888 199
#define px88__8___ 200
#define px88__8__8 201
#define px88__8_8_ 202
#define px88__8_88 203
#define px88__88__ 204
#define px88__88_8 205
#define px88__888_ 206
#define px88__8888 207
#define px88_8____ 208
#define px88_8___8 209
#define px88_8__8_ 210
#define px88_8__88 211
#define px88_8_8__ 212
#define px88_8_8_8 213
#define px88_8_88_ 214
#define px88_8_888 215
#define px88_88___ 216
#define px88_88__8 217
#define px88_88_8_ 218
#define px88_88_88 219
#define px88_888__ 220
#define px88_888_8 221
#define px88_8888_ 222
#define px88_88888 223
#define px888_____ 224
#define px888____8 225
#define px888___8_ 226
#define px888___88 227
#define px888__8__ 228
#define px888__8_8 229
#define px888__88_ 230
#define px888__888 231
#define px888_8___ 232
#define px888_8__8 233
#define px888_8_8_ 234
#define px888_8_88 235
#define px888_88__ 236
#define px888_88_8 237
#define px888_888_ 238
#define px888_8888 239
#define px8888____ 240
#define px8888___8 241
#define px8888__8_ 242
#define px8888__88 243
#define px8888_8__ 244
#define px8888_8_8 245
#define px8888_88_ 246
#define px8888_888 247
#define px88888___ 248
#define px88888__8 249
#define px88888_8_ 250
#define px88888_88 251
#define px888888__ 252
#define px888888_8 253
#define px8888888_ 254
#define px88888888 255


byte pixels[] = {
  px________,
  px________,
  px________,
  px8_____8_,
  px8888888_,
  px8_____8_,
  px________,
  px_88888__,
  px8_____8_,
  px_8___8__,
  px________,
  px________,
  px____888_,
  px8888____,
  px____888_,
  px________,
  px________,
  px________,
  px________,
  px8888888_,
  px8_______,
  px8_______,
  px________,
  px888888__,
  px___8__8_,
  px888888__,
  px________,
  px8888888_,
  px8__8__8_,
  px_88_88__,
  px________,
  px_8__88__,
  px8__8__8_,
  px_88__8__,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________
};

/*byte pixels[] = {
  px8_____8_,
  px8888888_,
  px8_____8_,
  px________,
  px________,
  px____88__,
  px__88__8_,
  px88___8__,
  px__88__8_,
  px____88__,
  px________,
  px________,
  px_888888_,
  px8_______,
  px8_______,
  px8888888_,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________,
  px________
};*/

/*byte pixels[] = {
//  px_______8,
//  px______8_,
  px_____8__,
  px____8___,
  px___8____,
  px__8_____,
  px_8______,
  px8_______,
  px_8______,
  px__8_____,
  px___8____,
  px____8___,
  px_____8__,
  px______8_
};*/

void outputPixels(byte lights) {
  PORTD = (lights & px8888888_); // pull these high
}


byte counter = 0;
byte prev = 0;
byte swappy = px_8_8_8_8; // we need to alternate pxels on, due to silly wiring
unsigned int redraws; // counter to hold how many alternating redraws remain
byte line; // stores the currently playing line

void setup() {
  DDRD = 0xFF; // all of portb is outputs
  PORTD = 0x00; // and switched off
}

void loop() {
  counter = (counter + 1) % sizeof(pixels);
  redraws = 1000;
  while(redraws > 0) {
    swappy = ~swappy;
    line = pixels[counter];
    outputPixels(line & swappy);
    redraws--;
  }
  
  PORTD = 0xFF;
  delay(1); // 1ms blank section
}

